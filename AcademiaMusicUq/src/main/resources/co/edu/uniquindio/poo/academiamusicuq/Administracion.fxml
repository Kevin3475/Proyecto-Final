<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane prefHeight="700.0" prefWidth="900.0" minHeight="600.0" minWidth="800.0" styleClass="dashboard-container" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="co.edu.uniquindio.poo.academiamusicuq.viewController.AdministracionViewController">

    <children>
        <VBox prefHeight="700.0" prefWidth="900.0" minHeight="600.0" minWidth="800.0"
              AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0"
              spacing="0">

            <!-- Header -->
            <HBox alignment="CENTER_LEFT" style="-fx-background-color: #2c3e50;" VBox.vgrow="NEVER" prefHeight="55.0">
                <padding>
                    <Insets left="20.0" right="20.0" />
                </padding>
                <children>
                    <Button mnemonicParsing="false" onAction="#onVolver" styleClass="secondary-button" text="â¬… Volver al MenÃº"
                            prefWidth="120.0" prefHeight="35.0">
                        <HBox.margin>
                            <Insets right="20.0" />
                        </HBox.margin>
                    </Button>
                    <Label style="-fx-text-fill: white; -fx-font-size: 18; -fx-font-weight: bold;" text="âš™ï¸ Panel de AdministraciÃ³n" />
                </children>
            </HBox>

            <!-- Contenido principal con pestaÃ±as -->
            <TabPane fx:id="tabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
                <tabs>
                    <!-- PESTAÃ‘A 1: DATOS ACADEMIA -->
                    <Tab text="ðŸ¢ Datos Academia">
                        <content>
                            <VBox spacing="15.0" styleClass="content-area" VBox.vgrow="ALWAYS">
                                <padding>
                                    <Insets top="20.0" bottom="20.0" left="15.0" right="15.0" />
                                </padding>

                                <!-- InformaciÃ³n de la Academia -->
                                <VBox spacing="15.0" styleClass="form-container" VBox.vgrow="NEVER">
                                    <padding>
                                        <Insets left="10.0" right="10.0" />
                                    </padding>

                                    <Label styleClass="section-title" text="InformaciÃ³n de la Academia" style="-fx-font-size: 16;"/>

                                    <GridPane hgap="12.0" vgap="12.0" VBox.vgrow="NEVER">
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="100.0" prefWidth="120.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="150.0" prefWidth="200.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="100.0" prefWidth="120.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="150.0" prefWidth="200.0" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints minHeight="35.0" prefHeight="35.0" vgrow="SOMETIMES" />
                                            <RowConstraints minHeight="35.0" prefHeight="35.0" vgrow="SOMETIMES" />
                                            <RowConstraints minHeight="35.0" prefHeight="35.0" vgrow="SOMETIMES" />
                                        </rowConstraints>
                                        <children>
                                            <Label styleClass="form-label" text="Nombre:*" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                            <TextField fx:id="txtNombreAcademia" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                            <Label styleClass="form-label" text="DirecciÃ³n:*" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                                            <TextField fx:id="txtDireccionAcademia" styleClass="form-field" GridPane.columnIndex="3" GridPane.rowIndex="0" />

                                            <Label styleClass="form-label" text="TelÃ©fono:*" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                            <TextField fx:id="txtTelefonoAcademia" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                                            <Label styleClass="form-label" text="Administrador:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                                            <TextField fx:id="txtAdminNombre" editable="false" styleClass="form-field" GridPane.columnIndex="3" GridPane.rowIndex="1" />

                                            <Label styleClass="form-label" text="Email Admin:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                            <TextField fx:id="txtAdminEmail" editable="false" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                                            <Label styleClass="form-label" text="TelÃ©fono Admin:" GridPane.columnIndex="2" GridPane.rowIndex="2" />
                                            <TextField fx:id="txtAdminTelefono" editable="false" styleClass="form-field" GridPane.columnIndex="3" GridPane.rowIndex="2" />
                                        </children>
                                    </GridPane>

                                    <HBox alignment="CENTER" spacing="15.0" VBox.vgrow="NEVER">
                                        <padding>
                                            <Insets top="10.0" />
                                        </padding>
                                        <children>
                                            <Button fx:id="btnActualizarAcademia" mnemonicParsing="false" onAction="#onActualizarAcademia"
                                                    styleClass="primary-button" text="ðŸ’¾ Actualizar" prefWidth="120" prefHeight="35"/>
                                            <Button fx:id="btnLimpiarAcademia" mnemonicParsing="false" onAction="#onLimpiarAcademia"
                                                    styleClass="secondary-button" text="ðŸ”„ Restaurar" prefWidth="120" prefHeight="35"/>
                                        </children>
                                    </HBox>

                                    <Label style="-fx-text-fill: #7f8c8d; -fx-font-size: 12;" text="* Campos obligatorios" />
                                </VBox>
                            </VBox>
                        </content>
                    </Tab>

                    <!-- PESTAÃ‘A 2: REPORTES -->
                    <Tab text="ðŸ“Š Reportes">
                        <content>
                            <VBox spacing="15.0" styleClass="content-area" VBox.vgrow="ALWAYS">
                                <padding>
                                    <Insets top="20.0" bottom="20.0" left="15.0" right="15.0" />
                                </padding>

                                <Label styleClass="section-title" text="GeneraciÃ³n de Reportes" style="-fx-font-size: 16;">
                                    <padding>
                                        <Insets left="5.0" bottom="10.0" />
                                    </padding>
                                </Label>

                                <!-- Filtros de Reportes -->
                                <VBox spacing="12.0" styleClass="form-container" VBox.vgrow="NEVER">
                                    <padding>
                                        <Insets left="10.0" right="10.0" />
                                    </padding>

                                    <Label style="-fx-font-weight: bold; -fx-font-size: 14;" text="ðŸ” Filtros del Reporte" />

                                    <GridPane hgap="10.0" vgap="10.0" VBox.vgrow="NEVER">
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="80.0" prefWidth="100.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="120.0" prefWidth="150.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="80.0" prefWidth="100.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="120.0" prefWidth="150.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="100.0" prefWidth="120.0" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints minHeight="35.0" prefHeight="35.0" vgrow="SOMETIMES" />
                                        </rowConstraints>
                                        <children>
                                            <Label styleClass="form-label" text="Tipo:" GridPane.columnIndex="0" />
                                            <ComboBox fx:id="cbTipoReporte" styleClass="form-field" prefHeight="35" GridPane.columnIndex="1" />

                                            <Label styleClass="form-label" text="Fecha Inicio:" GridPane.columnIndex="2" />
                                            <DatePicker fx:id="dpFechaInicio" styleClass="form-field" prefWidth="130" prefHeight="35" GridPane.columnIndex="3" />

                                            <Button fx:id="btnGenerarReporte" mnemonicParsing="false" onAction="#onGenerarReporte"
                                                    styleClass="primary-button" text="ðŸ“ˆ Generar" prefWidth="100" prefHeight="35" GridPane.columnIndex="4" />
                                        </children>
                                    </GridPane>

                                    <!-- Fecha Fin y Exportar en segunda fila -->
                                    <HBox alignment="CENTER_LEFT" spacing="10.0" VBox.vgrow="NEVER">
                                        <padding>
                                            <Insets top="8.0" />
                                        </padding>
                                        <children>
                                            <Label styleClass="form-label" text="Fecha Fin:" style="-fx-font-size: 12;"/>
                                            <DatePicker fx:id="dpFechaFin" styleClass="form-field" prefWidth="130" prefHeight="35"/>
                                            <Button fx:id="btnExportarReporte" mnemonicParsing="false" onAction="#onExportarReporte"
                                                    styleClass="secondary-button" text="ðŸ“¤ Exportar" prefWidth="100" prefHeight="35"/>
                                        </children>
                                    </HBox>
                                </VBox>

                                <!-- Tabla Reportes -->
                                <VBox spacing="8.0" VBox.vgrow="ALWAYS">
                                    <padding>
                                        <Insets left="10.0" right="10.0" top="10.0" />
                                    </padding>
                                    <children>
                                        <Label styleClass="section-subtitle" text="Resultados del Reporte" style="-fx-font-size: 14;"/>
                                        <TableView fx:id="tblReportes" VBox.vgrow="ALWAYS" prefHeight="300.0">
                                            <columns>
                                                <TableColumn fx:id="colIdReporte" prefWidth="70.0" minWidth="60.0" text="ID" />
                                                <TableColumn fx:id="colEstudianteReporte" prefWidth="130.0" minWidth="110.0" text="Estudiante" />
                                                <TableColumn fx:id="colCursoReporte" prefWidth="130.0" minWidth="110.0" text="Curso" />
                                                <TableColumn fx:id="colProfesorReporte" prefWidth="130.0" minWidth="110.0" text="Profesor" />
                                                <TableColumn fx:id="colCalificacionReporte" prefWidth="90.0" minWidth="80.0" text="CalificaciÃ³n" />
                                                <TableColumn fx:id="colFechaReporte" prefWidth="100.0" minWidth="90.0" text="Fecha" />
                                            </columns>
                                        </TableView>
                                    </children>
                                </VBox>
                            </VBox>
                        </content>
                    </Tab>

                    <!-- PESTAÃ‘A 3: COMENTARIOS FORMATIVOS -->
                    <Tab text="ðŸ’¬ Comentarios">
                        <content>
                            <VBox spacing="15.0" styleClass="content-area" VBox.vgrow="ALWAYS">
                                <padding>
                                    <Insets top="20.0" bottom="20.0" left="15.0" right="15.0" />
                                </padding>

                                <Label styleClass="section-title" text="GestiÃ³n de Comentarios Formativos" style="-fx-font-size: 16;">
                                    <padding>
                                        <Insets left="5.0" bottom="10.0" />
                                    </padding>
                                </Label>

                                <!-- SecciÃ³n Agregar Comentario -->
                                <VBox spacing="12.0" styleClass="form-container" VBox.vgrow="NEVER">
                                    <padding>
                                        <Insets left="10.0" right="10.0" />
                                    </padding>

                                    <Label style="-fx-font-weight: bold; -fx-font-size: 14;" text="âž• Agregar Comentario Formativo" />

                                    <GridPane hgap="10.0" vgap="10.0" VBox.vgrow="NEVER">
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="80.0" prefWidth="100.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="150.0" prefWidth="200.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="100.0" prefWidth="120.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="100.0" prefWidth="120.0" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints minHeight="35.0" prefHeight="35.0" vgrow="SOMETIMES" />
                                        </rowConstraints>
                                        <children>
                                            <Label styleClass="form-label" text="Estudiante:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                            <ComboBox fx:id="cbEstudianteComentarios" onAction="#onEstudianteComentariosChanged"
                                                      styleClass="form-field" prefHeight="35" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                            <Button fx:id="btnAgregarComentario" mnemonicParsing="false" onAction="#onAgregarComentario"
                                                    styleClass="primary-button" text="ðŸ’¬ Agregar" prefWidth="100" prefHeight="35" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                                            <Button fx:id="btnLimpiarComentarios" mnemonicParsing="false" onAction="#onLimpiarComentarios"
                                                    styleClass="secondary-button" text="ðŸ§¹ Limpiar" prefWidth="100" prefHeight="35" GridPane.columnIndex="3" GridPane.rowIndex="0" />
                                        </children>
                                    </GridPane>

                                    <!-- Ãrea de texto para comentario -->
                                    <VBox spacing="5.0" VBox.vgrow="NEVER">
                                        <padding>
                                            <Insets top="8.0" />
                                        </padding>
                                        <children>
                                            <Label styleClass="form-label" text="Comentario:" style="-fx-font-size: 12;"/>
                                            <TextArea fx:id="txtNuevoComentario" promptText="Escriba el comentario formativo..."
                                                      styleClass="form-field" prefHeight="80" VBox.vgrow="NEVER"/>
                                        </children>
                                    </VBox>
                                </VBox>

                                <!-- Tabla Comentarios -->
                                <VBox spacing="8.0" VBox.vgrow="ALWAYS">
                                    <padding>
                                        <Insets left="10.0" right="10.0" top="10.0" />
                                    </padding>
                                    <children>
                                        <Label styleClass="section-subtitle" text="Comentarios Formativos Registrados" style="-fx-font-size: 14;"/>
                                        <TableView fx:id="tblComentarios" VBox.vgrow="ALWAYS" prefHeight="300.0">
                                            <columns>
                                                <TableColumn fx:id="colIdComentario" prefWidth="70.0" minWidth="60.0" text="ID" />
                                                <TableColumn fx:id="colEstudianteComentario" prefWidth="130.0" minWidth="110.0" text="Estudiante" />
                                                <TableColumn fx:id="colCursoComentario" prefWidth="130.0" minWidth="110.0" text="Curso" />
                                                <TableColumn fx:id="colContenidoComentario" prefWidth="250.0" minWidth="200.0" text="Contenido" />
                                                <TableColumn fx:id="colFechaComentario" prefWidth="100.0" minWidth="90.0" text="Fecha" />
                                            </columns>
                                        </TableView>
                                    </children>
                                </VBox>
                            </VBox>
                        </content>
                    </Tab>

                    <!-- PESTAÃ‘A 4: ESTADÃSTICAS -->
                    <Tab text="ðŸ“ˆ EstadÃ­sticas">
                        <content>
                            <VBox spacing="15.0" styleClass="content-area" VBox.vgrow="ALWAYS">
                                <padding>
                                    <Insets top="20.0" bottom="20.0" left="15.0" right="15.0" />
                                </padding>

                                <Label styleClass="section-title" text="EstadÃ­sticas Generales del Sistema" style="-fx-font-size: 16;">
                                    <padding>
                                        <Insets left="5.0" bottom="10.0" />
                                    </padding>
                                </Label>

                                <!-- EstadÃ­sticas Generales -->
                                <VBox spacing="12.0" styleClass="form-container" VBox.vgrow="NEVER">
                                    <padding>
                                        <Insets left="10.0" right="10.0" />
                                    </padding>

                                    <Label style="-fx-font-weight: bold; -fx-font-size: 14;" text="ðŸ“Š Resumen General" />

                                    <GridPane hgap="10.0" vgap="10.0" VBox.vgrow="NEVER">
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="120.0" prefWidth="140.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="120.0" prefWidth="140.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="120.0" prefWidth="140.0" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints minHeight="70.0" prefHeight="80.0" vgrow="SOMETIMES" />
                                            <RowConstraints minHeight="70.0" prefHeight="80.0" vgrow="SOMETIMES" />
                                            <RowConstraints minHeight="70.0" prefHeight="80.0" vgrow="SOMETIMES" />
                                        </rowConstraints>
                                        <children>
                                            <!-- Fila 1 -->
                                            <VBox alignment="CENTER" spacing="3.0" style="-fx-background-color: #3498db; -fx-background-radius: 8; -fx-padding: 12;">
                                                <children>
                                                    <Label style="-fx-font-size: 18;" text="ðŸ‘¥" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 11;" text="Total Estudiantes" />
                                                    <Label fx:id="lblTotalEstudiantes" style="-fx-text-fill: white; -fx-font-size: 16; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>

                                            <VBox alignment="CENTER" spacing="3.0" style="-fx-background-color: #e74c3c; -fx-background-radius: 8; -fx-padding: 12;" GridPane.columnIndex="1">
                                                <children>
                                                    <Label style="-fx-font-size: 18;" text="ðŸŽ“" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 11;" text="Total Profesores" />
                                                    <Label fx:id="lblTotalProfesores" style="-fx-text-fill: white; -fx-font-size: 16; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>

                                            <VBox alignment="CENTER" spacing="3.0" style="-fx-background-color: #f39c12; -fx-background-radius: 8; -fx-padding: 12;" GridPane.columnIndex="2">
                                                <children>
                                                    <Label style="-fx-font-size: 18;" text="ðŸ“š" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 11;" text="Total Cursos" />
                                                    <Label fx:id="lblTotalCursos" style="-fx-text-fill: white; -fx-font-size: 16; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>

                                            <!-- Fila 2 -->
                                            <VBox alignment="CENTER" spacing="3.0" style="-fx-background-color: #9b59b6; -fx-background-radius: 8; -fx-padding: 12;" GridPane.rowIndex="1">
                                                <children>
                                                    <Label style="-fx-font-size: 18;" text="ðŸ“‹" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 11;" text="Total MatrÃ­culas" />
                                                    <Label fx:id="lblTotalMatriculas" style="-fx-text-fill: white; -fx-font-size: 16; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>

                                            <VBox alignment="CENTER" spacing="3.0" style="-fx-background-color: #2ecc71; -fx-background-radius: 8; -fx-padding: 12;" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                                <children>
                                                    <Label style="-fx-font-size: 18;" text="âœ…" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 11;" text="MatrÃ­culas Activas" />
                                                    <Label fx:id="lblMatriculasActivas" style="-fx-text-fill: white; -fx-font-size: 16; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>

                                            <VBox alignment="CENTER" spacing="3.0" style="-fx-background-color: #1abc9c; -fx-background-radius: 8; -fx-padding: 12;" GridPane.columnIndex="2" GridPane.rowIndex="1">
                                                <children>
                                                    <Label style="-fx-font-size: 18;" text="ðŸ" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 11;" text="MatrÃ­culas Finalizadas" />
                                                    <Label fx:id="lblMatriculasFinalizadas" style="-fx-text-fill: white; -fx-font-size: 16; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>

                                            <!-- Fila 3 -->
                                            <VBox alignment="CENTER" spacing="3.0" style="-fx-background-color: #34495e; -fx-background-radius: 8; -fx-padding: 12;" GridPane.rowIndex="2" GridPane.columnSpan="3">
                                                <children>
                                                    <Label style="-fx-font-size: 18;" text="ðŸ“œ" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 11;" text="Certificados Emitidos" />
                                                    <Label fx:id="lblCertificadosEmitidos" style="-fx-text-fill: white; -fx-font-size: 16; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>
                                        </children>
                                    </GridPane>
                                </VBox>

                                <!-- GrÃ¡ficos -->
                                <VBox spacing="10.0" VBox.vgrow="ALWAYS">
                                    <padding>
                                        <Insets left="10.0" right="10.0" top="10.0" />
                                    </padding>
                                    <children>
                                        <Label style="-fx-font-weight: bold; -fx-font-size: 14;" text="ðŸ“Š VisualizaciÃ³n de Datos" />

                                        <!-- GrÃ¡ficos en diseÃ±o vertical para mejor visualizaciÃ³n -->
                                        <HBox spacing="15.0" VBox.vgrow="ALWAYS">
                                            <!-- GrÃ¡fico de Torta - Niveles de Estudiantes -->
                                            <VBox spacing="8.0" HBox.hgrow="ALWAYS" prefHeight="250">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 12;" text="ðŸ“Š DistribuciÃ³n por Nivel" />
                                                <PieChart fx:id="pieChartEstudiantes" HBox.hgrow="ALWAYS" prefHeight="220"/>
                                            </VBox>

                                            <!-- GrÃ¡fico de Barras - Estudiantes por Curso -->
                                            <VBox spacing="8.0" HBox.hgrow="ALWAYS" prefHeight="250">
                                                <Label style="-fx-font-weight: bold; -fx-font-size: 12;" text="ðŸ“ˆ Estudiantes por Curso" />
                                                <BarChart fx:id="barChartCursos" HBox.hgrow="ALWAYS" prefHeight="220">
                                                    <xAxis>
                                                        <CategoryAxis label="Cursos" />
                                                    </xAxis>
                                                    <yAxis>
                                                        <NumberAxis label="Estudiantes" />
                                                    </yAxis>
                                                </BarChart>
                                            </VBox>
                                        </HBox>
                                    </children>
                                </VBox>
                            </VBox>
                        </content>
                    </Tab>
                </tabs>
            </TabPane>
        </VBox>
    </children>
</AnchorPane>