<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<AnchorPane prefHeight="700.0" prefWidth="1000.0" styleClass="dashboard-container" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="co.edu.uniquindio.poo.academiamusicuq.viewController.AdministracionViewController">

    <children>
        <VBox prefHeight="700.0" prefWidth="1000.0">
            <!-- Header -->
            <HBox alignment="CENTER_LEFT" style="-fx-background-color: #2c3e50; -fx-padding: 15;">
                <children>
                    <Button mnemonicParsing="false" onAction="#onVolver" styleClass="secondary-button" text="â¬… Volver al MenÃº">
                        <HBox.margin>
                            <Insets right="20.0" />
                        </HBox.margin>
                    </Button>
                    <Label style="-fx-text-fill: white; -fx-font-size: 20; -fx-font-weight: bold;" text="âš™ï¸ Panel de AdministraciÃ³n" />
                </children>
            </HBox>

            <!-- Contenido principal con pestaÃ±as -->
            <TabPane fx:id="tabPane" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
                <tabs>
                    <!-- PESTAÃ‘A 1: DATOS ACADEMIA -->
                    <Tab text="ðŸ¢ Datos Academia">
                        <content>
                            <VBox spacing="20.0" styleClass="content-area">
                                <VBox.margin>
                                    <Insets top="20.0" />
                                </VBox.margin>

                                <!-- InformaciÃ³n de la Academia -->
                                <VBox spacing="15.0" styleClass="form-container">
                                    <VBox.margin>
                                        <Insets left="20.0" right="20.0" />
                                    </VBox.margin>

                                    <Label styleClass="section-title" text="InformaciÃ³n de la Academia" />

                                    <GridPane hgap="15.0" vgap="15.0">
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="120.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="300.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="120.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="300.0" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                                            <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                                            <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                                        </rowConstraints>
                                        <children>
                                            <Label styleClass="form-label" text="Nombre:*" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                            <TextField fx:id="txtNombreAcademia" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                            <Label styleClass="form-label" text="DirecciÃ³n:*" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                                            <TextField fx:id="txtDireccionAcademia" styleClass="form-field" GridPane.columnIndex="3" GridPane.rowIndex="0" />

                                            <Label styleClass="form-label" text="TelÃ©fono:*" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                            <TextField fx:id="txtTelefonoAcademia" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="1" />

                                            <Label styleClass="form-label" text="Administrador:" GridPane.columnIndex="2" GridPane.rowIndex="1" />
                                            <TextField fx:id="txtAdminNombre" editable="false" styleClass="form-field" GridPane.columnIndex="3" GridPane.rowIndex="1" />

                                            <Label styleClass="form-label" text="Email Admin:" GridPane.columnIndex="0" GridPane.rowIndex="2" />
                                            <TextField fx:id="txtAdminEmail" editable="false" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="2" />

                                            <Label styleClass="form-label" text="TelÃ©fono Admin:" GridPane.columnIndex="2" GridPane.rowIndex="2" />
                                            <TextField fx:id="txtAdminTelefono" editable="false" styleClass="form-field" GridPane.columnIndex="3" GridPane.rowIndex="2" />
                                        </children>
                                    </GridPane>

                                    <HBox alignment="CENTER" spacing="15.0">
                                        <children>
                                            <Button fx:id="btnActualizarAcademia" mnemonicParsing="false" onAction="#onActualizarAcademia" styleClass="primary-button" text="ðŸ’¾ Actualizar" />
                                            <Button fx:id="btnLimpiarAcademia" mnemonicParsing="false" onAction="#onLimpiarAcademia" styleClass="secondary-button" text="ðŸ”„ Restaurar" />
                                        </children>
                                    </HBox>

                                    <Label style="-fx-text-fill: #7f8c8d; -fx-font-size: 12;" text="* Campos obligatorios" />
                                </VBox>
                            </VBox>
                        </content>
                    </Tab>

                    <!-- PESTAÃ‘A 2: REPORTES -->
                    <Tab text="ðŸ“Š Reportes">
                        <content>
                            <VBox spacing="20.0" styleClass="content-area">
                                <VBox.margin>
                                    <Insets top="20.0" />
                                </VBox.margin>

                                <Label styleClass="section-title" text="GeneraciÃ³n de Reportes">
                                    <VBox.margin>
                                        <Insets left="20.0" />
                                    </VBox.margin>
                                </Label>

                                <!-- Filtros de Reportes -->
                                <VBox spacing="15.0" styleClass="form-container">
                                    <VBox.margin>
                                        <Insets left="20.0" right="20.0" />
                                    </VBox.margin>

                                    <Label style="-fx-font-weight: bold; -fx-font-size: 16;" text="ðŸ” Filtros del Reporte" />

                                    <GridPane hgap="15.0" vgap="15.0">
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="120.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="200.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="120.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="200.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="150.0" />
                                 <ColumnConstraints />
                                 <ColumnConstraints />
                                 <ColumnConstraints />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                                        </rowConstraints>
                                        <children>
                                            <Label styleClass="form-label" text="Tipo Reporte:" GridPane.columnIndex="0" />
                                            <ComboBox fx:id="cbTipoReporte" styleClass="form-field" GridPane.columnIndex="1" />

                                            <Label styleClass="form-label" text="Fecha Inicio:" GridPane.columnIndex="2" />
                                            <DatePicker fx:id="dpFechaInicio" styleClass="form-field" GridPane.columnIndex="3" />

                                            <Label styleClass="form-label" text="Fecha Fin:" GridPane.columnIndex="4" />
                                            <DatePicker fx:id="dpFechaFin" styleClass="form-field" GridPane.columnIndex="5" />

                                            <Button fx:id="btnGenerarReporte" mnemonicParsing="false" onAction="#onGenerarReporte" styleClass="primary-button" text="ðŸ“ˆ Generar" GridPane.columnIndex="6" />
                                            <Button fx:id="btnExportarReporte" mnemonicParsing="false" onAction="#onExportarReporte" styleClass="secondary-button" text="ðŸ“¤ Exportar" GridPane.columnIndex="7" />
                                        </children>
                                    </GridPane>
                                </VBox>

                                <!-- Tabla Reportes -->
                                <Label styleClass="section-subtitle" text="Resultados del Reporte">
                                    <VBox.margin>
                                        <Insets left="20.0" />
                                    </VBox.margin>
                                </Label>

                                <TableView fx:id="tblReportes" VBox.vgrow="ALWAYS">
                                    <VBox.margin>
                                        <Insets bottom="20.0" left="20.0" right="20.0" top="10.0" />
                                    </VBox.margin>
                                    <columns>
                                        <TableColumn fx:id="colIdReporte" prefWidth="80.0" text="ID" />
                                        <TableColumn fx:id="colEstudianteReporte" prefWidth="150.0" text="Estudiante" />
                                        <TableColumn fx:id="colCursoReporte" prefWidth="150.0" text="Curso" />
                                        <TableColumn fx:id="colProfesorReporte" prefWidth="150.0" text="Profesor" />
                                        <TableColumn fx:id="colCalificacionReporte" prefWidth="100.0" text="CalificaciÃ³n" />
                                        <TableColumn fx:id="colFechaReporte" prefWidth="120.0" text="Fecha" />
                                    </columns>
                                </TableView>
                            </VBox>
                        </content>
                    </Tab>

                    <!-- PESTAÃ‘A 3: COMENTARIOS FORMATIVOS -->
                    <Tab text="ðŸ’¬ Comentarios Formativos">
                        <content>
                            <VBox spacing="20.0" styleClass="content-area">
                                <VBox.margin>
                                    <Insets top="20.0" />
                                </VBox.margin>

                                <Label styleClass="section-title" text="GestiÃ³n de Comentarios Formativos">
                                    <VBox.margin>
                                        <Insets left="20.0" />
                                    </VBox.margin>
                                </Label>

                                <!-- SecciÃ³n Agregar Comentario -->
                                <VBox spacing="15.0" styleClass="form-container">
                                    <VBox.margin>
                                        <Insets left="20.0" right="20.0" />
                                    </VBox.margin>

                                    <Label style="-fx-font-weight: bold; -fx-font-size: 16;" text="âž• Agregar Comentario Formativo" />

                                    <GridPane hgap="15.0" vgap="15.0">
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="120.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="300.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="150.0" />
                                 <ColumnConstraints />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                                            <RowConstraints minHeight="10.0" prefHeight="100.0" vgrow="SOMETIMES" />
                                        </rowConstraints>
                                        <children>
                                            <Label styleClass="form-label" text="Estudiante:" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                                            <ComboBox fx:id="cbEstudianteComentarios" onAction="#onEstudianteComentariosChanged" styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="0" />

                                            <Button fx:id="btnAgregarComentario" mnemonicParsing="false" onAction="#onAgregarComentario" styleClass="primary-button" text="ðŸ’¬ Agregar" GridPane.columnIndex="2" GridPane.rowIndex="0" />
                                            <Button fx:id="btnLimpiarComentarios" mnemonicParsing="false" onAction="#onLimpiarComentarios" styleClass="secondary-button" text="ðŸ§¹ Limpiar" GridPane.columnIndex="3" GridPane.rowIndex="0" />

                                            <Label styleClass="form-label" text="Comentario:" GridPane.columnIndex="0" GridPane.rowIndex="1" />
                                            <TextArea fx:id="txtNuevoComentario" promptText="Escriba el comentario formativo..." styleClass="form-field" GridPane.columnIndex="1" GridPane.columnSpan="3" GridPane.rowIndex="1" />
                                        </children>
                                    </GridPane>
                                </VBox>

                                <!-- Tabla Comentarios -->
                                <Label styleClass="section-subtitle" text="Comentarios Formativos Registrados">
                                    <VBox.margin>
                                        <Insets left="20.0" />
                                    </VBox.margin>
                                </Label>

                                <TableView fx:id="tblComentarios" VBox.vgrow="ALWAYS">
                                    <VBox.margin>
                                        <Insets bottom="20.0" left="20.0" right="20.0" top="10.0" />
                                    </VBox.margin>
                                    <columns>
                                        <TableColumn fx:id="colIdComentario" prefWidth="80.0" text="ID" />
                                        <TableColumn fx:id="colEstudianteComentario" prefWidth="150.0" text="Estudiante" />
                                        <TableColumn fx:id="colCursoComentario" prefWidth="150.0" text="Curso" />
                                        <TableColumn fx:id="colContenidoComentario" prefWidth="300.0" text="Contenido" />
                                        <TableColumn fx:id="colFechaComentario" prefWidth="120.0" text="Fecha" />
                                    </columns>
                                </TableView>
                            </VBox>
                        </content>
                    </Tab>

                    <!-- PESTAÃ‘A 4: ESTADÃSTICAS -->
                    <Tab text="ðŸ“ˆ EstadÃ­sticas">
                        <content>
                            <VBox spacing="20.0" styleClass="content-area">
                                <VBox.margin>
                                    <Insets top="20.0" />
                                </VBox.margin>

                                <Label styleClass="section-title" text="EstadÃ­sticas Generales del Sistema">
                                    <VBox.margin>
                                        <Insets left="20.0" />
                                    </VBox.margin>
                                </Label>

                                <!-- EstadÃ­sticas Generales -->
                                <VBox spacing="15.0" styleClass="form-container">
                                    <VBox.margin>
                                        <Insets left="20.0" right="20.0" />
                                    </VBox.margin>

                                    <Label style="-fx-font-weight: bold; -fx-font-size: 16;" text="ðŸ“Š Resumen General" />

                                    <GridPane hgap="20.0" prefHeight="415.0" prefWidth="960.0" vgap="15.0">
                                        <columnConstraints>
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="200.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="200.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="200.0" />
                                            <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" prefWidth="200.0" />
                                        </columnConstraints>
                                        <rowConstraints>
                                            <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                                            <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
                                        </rowConstraints>
                                        <children>
                                            <!-- Fila 1 -->
                                            <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #3498db; -fx-background-radius: 10; -fx-padding: 15;">
                                                <children>
                                                    <Label style="-fx-font-size: 24;" text="ðŸ‘¥" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Total Estudiantes" />
                                                    <Label fx:id="lblTotalEstudiantes" style="-fx-text-fill: white; -fx-font-size: 18; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>

                                            <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #e74c3c; -fx-background-radius: 10; -fx-padding: 15;" GridPane.columnIndex="1">
                                                <children>
                                                    <Label style="-fx-font-size: 24;" text="ðŸŽ“" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Total Profesores" />
                                                    <Label fx:id="lblTotalProfesores" style="-fx-text-fill: white; -fx-font-size: 18; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>

                                            <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #f39c12; -fx-background-radius: 10; -fx-padding: 15;" GridPane.columnIndex="2">
                                                <children>
                                                    <Label style="-fx-font-size: 24;" text="ðŸ“š" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Total Cursos" />
                                                    <Label fx:id="lblTotalCursos" style="-fx-text-fill: white; -fx-font-size: 18; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>

                                            <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #9b59b6; -fx-background-radius: 10; -fx-padding: 15;" GridPane.columnIndex="3">
                                                <children>
                                                    <Label style="-fx-font-size: 24;" text="ðŸ“‹" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Total MatrÃ­culas" />
                                                    <Label fx:id="lblTotalMatriculas" style="-fx-text-fill: white; -fx-font-size: 18; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>

                                            <!-- Fila 2 -->
                                            <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #2ecc71; -fx-background-radius: 10; -fx-padding: 15;" GridPane.rowIndex="1">
                                                <children>
                                                    <Label style="-fx-font-size: 24;" text="âœ…" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="MatrÃ­culas Activas" />
                                                    <Label fx:id="lblMatriculasActivas" style="-fx-text-fill: white; -fx-font-size: 18; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>

                                            <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #1abc9c; -fx-background-radius: 10; -fx-padding: 15;" GridPane.columnIndex="1" GridPane.rowIndex="1">
                                                <children>
                                                    <Label style="-fx-font-size: 24;" text="ðŸ" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="MatrÃ­culas Finalizadas" />
                                                    <Label fx:id="lblMatriculasFinalizadas" style="-fx-text-fill: white; -fx-font-size: 18; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>

                                            <VBox alignment="CENTER" spacing="5.0" style="-fx-background-color: #34495e; -fx-background-radius: 10; -fx-padding: 15;" GridPane.columnIndex="2" GridPane.rowIndex="1">
                                                <children>
                                                    <Label style="-fx-font-size: 24;" text="ðŸ“œ" />
                                                    <Label style="-fx-text-fill: white; -fx-font-weight: bold;" text="Certificados Emitidos" />
                                                    <Label fx:id="lblCertificadosEmitidos" style="-fx-text-fill: white; -fx-font-size: 18; -fx-font-weight: bold;" text="0" />
                                                </children>
                                            </VBox>
                                        </children>
                                    </GridPane>
                                </VBox>

                                <!-- GrÃ¡ficos -->
                                <HBox spacing="20.0" VBox.vgrow="ALWAYS">
                                    <VBox.margin>
                                        <Insets bottom="20.0" left="20.0" right="20.0" />
                                    </VBox.margin>

                                    <!-- GrÃ¡fico de Torta - Niveles de Estudiantes -->
                                    <VBox spacing="10.0" HBox.hgrow="ALWAYS">
                                        <Label style="-fx-font-weight: bold;" text="ðŸ“Š DistribuciÃ³n por Nivel" />
                                        <PieChart fx:id="pieChartEstudiantes" HBox.hgrow="ALWAYS" />
                                    </VBox>

                                    <!-- GrÃ¡fico de Barras - Estudiantes por Curso -->
                                    <VBox spacing="10.0" HBox.hgrow="ALWAYS">
                                        <Label style="-fx-font-weight: bold;" text="ðŸ“ˆ Estudiantes por Curso" />
                                        <BarChart fx:id="barChartCursos" prefHeight="382.0" prefWidth="448.0" HBox.hgrow="ALWAYS">
                                            <xAxis>
                                                <CategoryAxis label="Cursos" />
                                            </xAxis>
                                            <yAxis>
                                                <NumberAxis label="Estudiantes" />
                                            </yAxis>
                                        </BarChart>
                                    </VBox>
                                </HBox>
                            </VBox>
                        </content>
                    </Tab>
                </tabs>
            </TabPane>
        </VBox>
    </children>
</AnchorPane>
